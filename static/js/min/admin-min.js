function isNumber(e){return!isNaN(parseFloat(e))&&isFinite(e)}function ucFirst(e){return e.charAt(0).toUpperCase()+e.slice(1)}Array.prototype.indexOf||(Array.prototype.indexOf=function(e){"use strict";if(null===this)throw new TypeError;var t=Object(this),r=t.length>>>0;if(0===r)return-1;var s=0;if(arguments.length>1&&(s=Number(arguments[1]),s!=s?s=0:0!=s&&1/0!=s&&s!=-1/0&&(s=(s>0||-1)*Math.floor(Math.abs(s)))),s>=r)return-1;for(var a=s>=0?s:Math.max(r-Math.abs(s),0);r>a;a++)if(a in t&&t[a]===e)return a;return-1}),function($){$.fn.customCheckbox=function(){return this.each(function(){var e=$(this).hide(),t=$('<a href="#"><span></span></a>').addClass("ls-checkbox").insertAfter(this);"undefined"!==e.attr("data-help")&&t.attr("data-help",e.attr("data-help")),t.addClass(e.prop("checked")?"on":"off")})}}(jQuery);var lsScreenOptionsActions={init:function(){jQuery(document).on("submit","#ls-screen-options-form",function(e){e.preventDefault(),lsScreenOptionsActions.saveSettings(this,!0)}),jQuery(document).on("click","#ls-screen-options-form input:checkbox",function(){var e=!1;"undefined"!=typeof lsScreenOptionsActions[jQuery(this).attr("name")]&&lsScreenOptionsActions[jQuery(this).attr("name")](this),jQuery(this).hasClass("reload")&&(e=!0),lsScreenOptionsActions.saveSettings(jQuery(this).closest("form"),e)})},saveSettings:function(e,t){var r={};jQuery(e).find("input").each(function(){r[jQuery(this).attr("name")]=jQuery(this).is(":checkbox")?jQuery(this).prop("checked"):jQuery(this).val()}),jQuery.post(ajaxurl,jQuery.param({action:"ls_save_screen_options",options:r}),function(){"undefined"!=typeof t&&t===!0&&(document.location.href="admin.php?page=layerslider")})},showTooltips:function(e){jQuery(e).prop("checked")===!0?lsTooltip.init():lsTooltip.destroy()}},LS_BoxToggles={init:function(){jQuery(".ls-box-toggle").click(function(){var e=jQuery(this).closest(".ls-box"),t=jQuery(this);e.hasClass("collapsed")?(e.removeClass("collapsed"),t.removeClass("dashicons-arrow-right").addClass("dashicons-arrow-down"),jQuery.post(ajaxurl,{action:"ls_update_box_toggles",key:t.attr("id"),collapsed:!1})):(e.addClass("collapsed"),t.removeClass("dashicons-arrow-down").addClass("dashicons-arrow-right"),jQuery.post(ajaxurl,{action:"ls_update_box_toggles",key:t.attr("id"),collapsed:!0}))})}},lsTooltip={timeout:0,init:function(){jQuery(document).on("mouseover","[data-help]",function(){var e=this;lsTooltip.timeout=setTimeout(function(){lsTooltip.open(e)},400)}),jQuery(document).on("mouseout","[data-help]",function(){clearTimeout(lsTooltip.timeout),lsTooltip.close()})},destroy:function(){jQuery(document).off("mouseover","[data-help]"),jQuery(document).off("mouseout","[data-help]")},open:function(e){jQuery("body").prepend(jQuery("<div>",{"class":"ls-tooltip"}).append(jQuery("<div>",{"class":"inner"})).append(jQuery("<span>")));var t=jQuery(".ls-tooltip");t.find(".inner").html(jQuery(e).data("help"));var r=jQuery(window).width(),s=jQuery(e).width(),a=jQuery(e).offset().left,i=jQuery(e).offset().top,n=t.outerWidth(),l=t.outerHeight();t.css({top:i-l-10,left:a-(n-s)/2}),t.offset().left+n>r&&(t.css({left:"auto",right:10}),t.find("span").css({left:"auto",right:r-jQuery(e).offset().left-jQuery(e).outerWidth()/2-17,marginLeft:"auto"}))},close:function(){jQuery(".ls-tooltip").remove()}},LayerSlider={uploadInput:null,dragIndex:0,newIndex:0,timeout:0,counter:0,selectMainTab:function(e){jQuery("#ls-main-nav-bar a").removeClass("active"),jQuery(e).addClass("active"),jQuery("#ls-pages .ls-page").removeClass("active"),jQuery("#ls-pages .ls-page").eq(jQuery(e).index()).addClass("active"),jQuery(e).hasClass("callbacks")&&0===jQuery(".ls-callback-page .CodeMirror-code").length&&(LS_CodeMirror.init({mode:"javascript",autofocus:!1,styleActiveLine:!1}),jQuery(window).scrollTop(0))},selectSettingsTab:function(e){var t=jQuery(e).index();if(jQuery(e).siblings().removeClass("active"),jQuery(e).addClass("active"),jQuery("div.ls-settings-contents tbody.active").removeClass("active"),jQuery("div.ls-settings-contents tbody").eq(t).addClass("active"),jQuery(e).hasClass("codemirror")&&0===jQuery("div.ls-settings-contents tbody:eq("+t+") .CodeMirror-code").length){var r=CodeMirror.fromTextArea(jQuery("div.ls-settings-contents tbody:eq("+t+") textarea.ls-codemirror")[0],{mode:"css",theme:"solarized",lineWrapping:!0});r.on("change",function(e){e.getTextArea().value=e.getValue()})}},addLayer:function(){var e=jQuery("#ls-sample > div").clone();e.appendTo("#ls-layers"),jQuery("#ls-layer-tabs a").removeClass("active");var t=e.index(),r=jQuery('<a href="#">Slide #'+(t+1)+'<span class="dashicons dashicons-dismiss"></span>').insertBefore("#ls-add-layer");r.click(),LayerSlider.addSortables(),LayerSlider.generatePreview(t),LayerSlider.addPreviewSlider(jQuery(".ls-editor-slider",e)),LayerSlider.addColorPicker(e.find(".ls-colorpicker"))},removeLayer:function(e){if(confirm("Are you sure you want to remove this slide?")){var t=jQuery(e).parent(),r=jQuery(e).closest("#ls-layer-tabs").next().children().eq(t.index());r.next().length>0?t.next().click():r.prev().length>0&&t.prev().click(),t.remove(),r.remove(),LayerSlider.reindexLayers()}},selectLayer:function(e){jQuery("#ls-layer-tabs a").removeClass("active"),jQuery("#ls-layers .ls-layer-box").removeClass("active"),jQuery(e).addClass("active"),jQuery("#ls-layers .ls-layer-box").eq(jQuery(e).index()).addClass("active"),LayerSlider.generatePreview(jQuery(e).index()),LayerSlider.stop(),lsTimeLine.hide(jQuery(".ls-tl"))},duplicateLayer:function(e){LayerSlider.cloneFix();var t=jQuery(e).closest(".ls-layer-box").index();jQuery('<a href="#">Slide #0<span class="dashicons dashicons-dismiss"></span></a>').insertBefore("#ls-layer-tabs a:last"),LayerSlider.reindexLayers();var r=jQuery(e).closest(".ls-layer-box").clone();r.appendTo("#ls-layers"),r.removeClass("active"),LayerSlider.addSortables(),jQuery(".ls-editor-slider",r).empty().next().text("100%"),LayerSlider.addPreviewSlider(jQuery(".ls-editor-slider",r)),r.find(".ls-colorpicker").minicolors("destroy"),LayerSlider.addColorPicker(r.find(".ls-colorpicker"))},addPreviewSlider:function(e){jQuery(e).slider({value:1,min:.3,max:2,step:.1,range:"min",orientation:"horizontal",slide:function(e,t){jQuery(t.handle).parent().next().text(""+parseInt(100*t.value)+"%");var r=jQuery(t.handle).closest(".ls-layer-box"),s=r.find(".ls-preview-wrapper").css("zoom",t.value)}})},addSublayer:function(e){var t=jQuery("#ls-sample .ls-sublayers > tr").clone();t.appendTo(jQuery(e).prev().find(".ls-sublayers"));var r=t.index();t.find(".ls-sublayer-number").html(r+1),t.find(".ls-sublayer-title").val("Layer #"+(r+1)),t.click(),LayerSlider.addColorPicker(t.find(".ls-colorpicker"))},selectSubLayer:function(e){jQuery(e).index()!=jQuery(e).parent().children(".active:first").index()&&(jQuery(e).parent().children().removeClass("active"),jQuery(e).addClass("active"),lsTimeLine.hide(jQuery(e).closest("table").find(".ls-tl")))},selectSublayerPage:function(e){jQuery(e).parent().children().removeClass("active"),jQuery(e).parent().next().find(".ls-sublayer-page").removeClass("active"),jQuery(e).addClass("active"),jQuery(e).parent().next().find(".ls-sublayer-page").eq(jQuery(e).index()).addClass("active")},removeSublayer:function(e){if(confirm("Are you sure you want to remove this layer?")){var t=jQuery(e).closest("tr"),r=jQuery(e).closest(".ls-layer-box");t.next().length>0?t.next().click():t.prev().length>0&&t.prev().click(),jQuery(e).remove(),t.remove(),LayerSlider.generatePreview(r.index())}},highlightSublayer:function(e){if(jQuery(e).hasClass("active"))jQuery(e).removeClass("active"),jQuery(e).closest(".ls-layer-box").find(".draggable").children().each(function(e){jQuery(this).css({zIndex:10+e}),jQuery(this).css("opacity",1)});else{jQuery(".ls-highlight").removeClass("active"),jQuery(e).addClass("active"),jQuery(e).closest(".ls-layer-box").find(".draggable").children().css({opacity:.5});var t=jQuery(e).closest("tr").index();jQuery(e).closest(".ls-layer-box").find(".draggable").children().eq(t).css({zIndex:1e3,opacity:1})}},eyeSublayer:function(e){jQuery(e).hasClass("active")?jQuery(e).removeClass("active"):jQuery(e).addClass("active"),LayerSlider.generatePreview(jQuery(".ls-box.active").index())},lockSublayer:function(e){jQuery(e).hasClass("active")?jQuery(e).removeClass("active"):jQuery(e).addClass("active"),LayerSlider.generatePreview(jQuery(".ls-box.active").index())},addColorPicker:function(e){jQuery(e).minicolors({opacity:!0,changeDelay:100,position:"bottom right",change:function(e,t){LayerSlider.willGeneratePreview(jQuery(".ls-box.active").index())}})},duplicateSublayer:function(e){LayerSlider.cloneFix();var t=jQuery(e).closest(".ls-sublayer-wrapper").closest("tr").clone();t.removeClass("active"),t.appendTo(jQuery(e).closest(".ls-sublayers")),t.find(".ls-sublayer-title").val(t.find(".ls-sublayer-title").val()+" copy"),LayerSlider.reindexSublayers(),LayerSlider.generatePreview(jQuery(e).closest(".ls-layer-box").index()),t.find(".ls-colorpicker").minicolors("destroy"),LayerSlider.addColorPicker(t.find(".ls-colorpicker"))},skipSublayer:function(e){LayerSlider.generatePreview(jQuery(e).closest(".ls-layer-box").index())},selectMediaType:function(e){var t=jQuery(e).closest(".ls-sublayer-page"),r=jQuery(e).data("section"),s=jQuery(".ls-layer-sections",t).children();switch(jQuery(e).siblings().removeAttr("class"),jQuery(e).attr("class","active"),jQuery('input[name="media"]',t).val(r),s.hide().removeClass("ls-hidden"),jQuery(".ls-sublayer-element",t).hide().removeClass("ls-hidden"),jQuery(".ls-html-code p",t).hide().removeClass("ls-hidden"),r){case"img":s.eq(0).show();break;case"text":s.eq(1).show(),t.find(".ls-sublayer-element").show();break;case"html":s.eq(1).show(),jQuery(".ls-html-code p",t).show();break;case"post":s.eq(1).show(),s.eq(2).show(),""!==jQuery(e).closest(".ls-layer-box").find(".ls-post-json").val()?jQuery(".ls-posts-configured",t).show().next().hide():jQuery(".ls-posts-configured",t).hide().next().show()}LayerSlider.willGeneratePreview(jQuery(".ls-box.active").index())},selectElementType:function(e){var t=jQuery(e).closest(".ls-sublayer-page"),r=jQuery(e).data("element");jQuery(e).siblings().removeClass("active"),jQuery(e).addClass("active"),jQuery('input[name="type"]',t).val(r),LayerSlider.willGeneratePreview(jQuery(".ls-box.active").index())},willGeneratePreview:function(e){clearTimeout(LayerSlider.timeout),LayerSlider.timeout=setTimeout(function(){-1==e?jQuery("#ls-layers .ls-layer-box").each(function(e){LayerSlider.generatePreview(e)}):LayerSlider.generatePreview(e)},1e3)},generatePreview:function(e){var t=jQuery("#ls-layers .ls-layer-box").eq(e),r=jQuery(".ls-preview").eq(e+1),s=r.find(".draggable"),a=jQuery(".ls-settings"),i=jQuery('input[name="width"]',a).val(),n=jQuery('input[name="height"]',a).val();n=-1!=n.indexOf("%")?400:n;var l=jQuery('input[name="sublayercontainer"]',a).val();""!=l&&0!=l&&(i=l),r.add(s).css({width:i,height:n}),r.parent().css({width:i});var o=jQuery.parseJSON(jQuery("#ls-posts-json").val()),u=jQuery('input[name="post_offset"]',t).val();-1==u&&(u=e);var d=o[u],c=jQuery('input[name="backgroundcolor"]',a).val();c=""!==c?c:"transparent";var y=jQuery('input[name="backgroundimage"]',a).val();y=""!==y?"url("+y+")":"none",r.css({backgroundColor:c}),r.css({backgroundImage:y});var p=jQuery('input[name="yourlogo"]',a).val(),h=jQuery('input[name="yourlogostyle"]',a).val();if(r.parent().find(".yourlogo").remove(),p&&""!==p){var j=jQuery('<img src="'+p+'" class="yourlogo">').prependTo(jQuery(r).parent());j.attr("style",h);var f=oR=oT=oB="auto";if("auto"!=j.css("left"))var Q=j[0].style.left;if("auto"!=j.css("right"))var v=j[0].style.right;if("auto"!=j.css("top"))var m=j[0].style.top;if("auto"!=j.css("bottom"))var g=j[0].style.bottom;f=Q&&-1!=Q.indexOf("%")?i/100*parseInt(Q)-j.width()/2:parseInt(Q),oR=v&&-1!=v.indexOf("%")?i/100*parseInt(v)-j.width()/2:parseInt(v),oT=m&&-1!=m.indexOf("%")?n/100*parseInt(m)-j.height()/2:parseInt(m),oB=g&&-1!=g.indexOf("%")?n/100*parseInt(g)-j.height()/2:parseInt(g),j.css({left:f,right:oR,top:oT,bottom:oB})}var b=jQuery('input[name="background"]',t).val();"[image-url]"==b&&(b=d["image-url"],jQuery(".slide-image:eq(0) img",t).attr("src",d["image-url"])),s.css(""!=b?{backgroundImage:"url("+b+")",backgroundPosition:"center center"}:{backgroundImage:"none"}),s.children().remove(),jQuery("#ls-layers .ls-layer-box").eq(e).find(".ls-sublayers > tr").each(function(e){if(jQuery('input[name="skip"]',this).prop("checked"))return jQuery("<div>").appendTo(s).hide(),!0;if(jQuery(".ls-icon-eye",this).hasClass("active"))return jQuery("<div>").appendTo(s).hide(),!0;var t,r=jQuery('input[name="type"]',this).val(),a=jQuery('textarea[name="html"]',this).val();switch(jQuery('input[name="media"]',this).val()){case"img":r="img";break;case"html":r="div";break;case"post":r="post"}var i=jQuery('input[name="id"]',this).val(),n=jQuery('input[name="class"]',this).val();if("img"==r){var l=jQuery('input[name="image"]',this).val();"[image-url]"==l&&(l=d["image-url"],jQuery(".slide-image:eq(0) img",this).attr("src",d["image-url"]));var o=""!==l?'<img src="'+l+'">':"<div>";t=jQuery(o).appendTo(s)}else if("post"==r){var u=jQuery('input[name="post_text_length"]',this).val();for(var c in d)-1!==a.indexOf("["+c+"]")&&(("title"==c||"content"==c||"excerpt"==c)&&u>0&&(d[c]=d[c].substr(0,u)),a=a.replace("["+c+"]",d[c]));a=jQuery.trim(a);var y=a.substr(0,1),p=a.substr(a.length-1,1);"<"==y&&">"==p?(a=a.replace(/(\r\n|\n|\r)/gm,""),t=jQuery(a).appendTo(s)):t=jQuery("<div>").html(a).appendTo(s)}else t=jQuery("<"+r+">").appendTo(s),""!==a&&t.html(a);jQuery(".ls-icon-lock",this).hasClass("active")&&t.addClass("disabled");var h=jQuery('input[name="top"]',this).val(),j=jQuery('input[name="left"]',this).val(),f=jQuery('textarea[name="style"]',this).val(),Q={};jQuery(".ls-sublayer-style input.auto",this).each(function(){var e=jQuery(this).val(),t=jQuery(this).attr("name");return""===e?!0:(";"==e.slice(-1)&&(e=e.substring(0,e.length-1)),void(Q[t]=isNumber(e)?e+"px":e))}),t.attr("style",f).css(Q),t.attr("id",i).addClass(n),jQuery('input[name="wordwrap"]',this).prop("checked")===!1&&t.css("white-space","nowrap");var v=isNaN(parseInt(t.css("padding-top")))?0:parseInt(t.css("padding-top")),m=isNaN(parseInt(t.css("padding-left")))?0:parseInt(t.css("padding-left")),g=isNaN(parseInt(t.css("border-top-width")))?0:parseInt(t.css("border-top-width")),b=isNaN(parseInt(t.css("border-left-width")))?0:parseInt(t.css("border-left-width")),x=function(){t.css(-1!==h.indexOf("%")?{top:s.height()/100*parseInt(h)-t.height()/2-v-g}:{top:parseInt(h)}),t.css(-1!==j.indexOf("%")?{left:s.width()/100*parseInt(j)-t.width()/2-m-b}:{left:parseInt(j)})};t.is("img")?t.load(function(){x()}).attr("src",t.attr("src")):x(),t.css({zIndex:10+t.index()})}),LayerSlider.addDraggable()},openMediaLibrary:function(){1==newMediaUploader?jQuery(document).on("click",".ls-upload",function(e){e.preventDefault(),uploadInput=this;var t=jQuery(this).hasClass("ls-insert-media")?"video,audio":"image";if(jQuery(this).hasClass("ls-insert-media")||jQuery(this).hasClass("ls-mass-upload"))var r=!0;else var r=!1;var s=wp.media({title:"Pick an image to use it in LayerSlider WP",multiple:r,library:{type:t},button:{text:"Insert"}});s.on("select",function(){var e=s.state().get("selection").first().toJSON(),t=s.state().get("selection").toJSON();if(jQuery(uploadInput).hasClass("ls-mass-upload")){var r=jQuery(uploadInput).closest(".ls-layer-box"),a=r.find(".ls-sublayers > tr:last-child");for(jQuery(uploadInput).prev().val(e.url),jQuery(uploadInput).prev().prev().val(e.id),"undefined"!=typeof e.sizes.thumbnail?jQuery(uploadInput).find("img").attr("src",e.sizes.thumbnail.url):jQuery(uploadInput).find("img").attr("src",e.sizes.full.url),c=1;c<t.length;c++){var i=r.find(".ls-sublayers > tr").length+1,n=jQuery("#ls-sample .ls-sublayers > tr").clone(),l=n.appendTo(r.find(".ls-sublayers")).find("div.ls-image");l.prev().val(t[c].url),l.prev().prev().val(t[c].id),"undefined"!=typeof t[c].sizes.thumbnail?l.find("img").attr("src",t[c].sizes.thumbnail.url):l.find("img").attr("src",t[c].sizes.full.url),n.find('input[name="subtitle"]').val("Layer #"+i),n.find(".ls-sublayer-number").text(i)}"undefined"!=typeof n&&n.click()}else if(jQuery(uploadInput).is("div.ls-image"))jQuery(uploadInput).prev().val(e.url),jQuery(uploadInput).prev().prev().val(e.id),"undefined"!=typeof e.sizes.thumbnail?jQuery(uploadInput).find("img").attr("src",e.sizes.thumbnail.url):jQuery(uploadInput).find("img").attr("src",e.sizes.full.url);else if(jQuery(uploadInput).hasClass("ls-insert-media")){var o=!1,u=!1,d=[],y=[],p="";for(c=0;c<t.length;c++){var h="/"+t[c].url.split("/").slice(3).join("/");"video"===t[c].type?(o=!0,d.push({url:h,mime:e.mime})):"audio"===t[c].type&&(u=!0,y.push({url:h,mime:e.mime}))}if(o){for(p+='<video width="320" height="240" preload="metadata" controls>\r\n',c=0;c<d.length;c++)p+='	<source src="'+d[c].url+'" type="'+d[c].mime+'">\r\n';p+="</video>"}if(u){for(o&&(p+="\r\n\r\n"),p+='<audio preload="metadata" nocontrols>\r\n',c=0;c<y.length;c++)p+='	<source src="'+y[c].url+'" type="'+y[c].mime+'">\r\n';p+="</audio>"}jQuery(uploadInput).parent().prev().val(p)}else jQuery(uploadInput).val(e.url),jQuery(uploadInput).is('input[name="image"]')&&jQuery(uploadInput).prev().attr("src",e.url);LayerSlider.generatePreview(jQuery(".ls-layer-box.active").index())}),s.open()}):jQuery(document).on("click",".ls-upload",function(e){return e.preventDefault(),uploadInput=this,tb_show("Upload or select a new image to insert into LayerSlider WP","media-upload.php?type=image&amp;TB_iframe=true&width=650&height=400"),!1})},insertUpload:function(){window.send_to_editor=function(e){var t=jQuery("img",e).attr("src");jQuery(uploadInput).is("div.ls-image")?(jQuery(uploadInput).prev().val(attachment.url),jQuery(uploadInput).prev().prev().val(attachment.id),jQuery(uploadInput).children("img").attr("src",attachment.sizes.thumbnail.url)):jQuery(uploadInput).val(t),tb_remove(),LayerSlider.generatePreview(jQuery(".ls-layer-box.active").index())}},addSortables:function(){jQuery(".ls-sublayer-sortable").sortable({handle:"span.ls-sublayer-sortable-handle",containment:"parent",tolerance:"pointer",delay:150,axis:"y",helper:function(e,t){var r=t.children(),s=t.clone();return s.children().each(function(e){jQuery(this).width(r.eq(e).width())}),s},update:function(e,t){LayerSlider.reindexSublayers(),LayerSlider.generatePreview(jQuery("#ls-layers .ls-layer-box.active").index())}})},addLayerSortables:function(){jQuery("#ls-layer-tabs").sortable({start:function(){LayerSlider.dragIndex=jQuery(".ui-sortable-placeholder").index()-1},change:function(){jQuery(".ui-sortable-helper").addClass("moving")},stop:function(e,t){var r=LayerSlider.dragIndex,s=jQuery(".moving").index();if(s>-1)if(0==s)jQuery("#ls-layers .ls-layer-box").eq(r).prependTo("#ls-layers");else{var a=jQuery("#ls-layers .ls-layer-box").eq(r);jQuery("#ls-layers .ls-layer-box").eq(r).remove(),a.insertAfter("#ls-layers .ls-layer-box:eq("+(s-1)+")")}jQuery(".moving").removeClass("moving"),LayerSlider.reindexLayers(),LayerSlider.addSortables(),jQuery("#ls-layers .ls-colorpicker").minicolors("destroy"),LayerSlider.addColorPicker("#ls-layers .ls-colorpicker")},containment:"parent",tolerance:"pointer",items:"a:not(.unsortable)"})},addDraggable:function(){jQuery(".draggable").children().draggable({drag:function(){LayerSlider.dragging()},stop:function(){LayerSlider.dragging()}}),jQuery(".draggable .disabled").draggable("disable")},dragging:function(){var e=parseInt(jQuery(".ui-draggable-dragging").position().top),t=parseInt(jQuery(".ui-draggable-dragging").position().left),r=jQuery(".ui-draggable-dragging").closest(".ls-layer-box"),s=jQuery(".ui-draggable-dragging").index();r.find('input[name="top"]').eq(s).val(e+"px"),r.find('input[name="left"]').eq(s).val(t+"px")},selectDragElement:function(e){jQuery(e).closest(".ls-layer-box").find(".ls-sublayers > tr").eq(jQuery(e).index()).click(),jQuery(e).closest(".ls-layer-box").find(".ls-sublayers > tr").eq(jQuery(e).index()).find(".ls-sublayer-nav a:eq(1)").click()},reindexSublayers:function(e){jQuery("#ls-layers .ls-layer-box.active .ls-sublayers > tr").each(function(e){jQuery(this).find(".ls-sublayer-number").html(e+1),-1!=jQuery(this).find(".ls-sublayer-title").val().indexOf("Sublayer")&&-1!=jQuery(this).find(".ls-sublayer-title").val().indexOf("Layer")&&-1==jQuery(this).find(".ls-sublayer-title").val().indexOf("copy")&&jQuery(this).find(".ls-sublayer-title").val("Layer #"+(e+1))})},reindexLayers:function(){jQuery("#ls-layer-tabs a:not(.unsortable)").each(function(e){jQuery(this).html("Slide #"+(e+1)+'<span class="dashicons dashicons-dismiss"></span>')})},play:function(e){var t=jQuery("#ls-layers .ls-layer-box").eq(e).find(".ls-real-time-preview");if(t.children().length>0)return jQuery("#ls-layers .ls-layer-box").eq(e).find(".ls-preview").show(),t.find(".ls-container").layerSlider("stop"),t.html("").hide(),jQuery("#ls-layers .ls-layer-box").eq(e).find(".ls-preview-button").html("Enter Preview").removeClass("playing"),void lsTimeLine.remove();var r=jQuery('.ls-settings input[name="width"]').val(),s=jQuery('.ls-settings input[name="height"]').val(),a=null;t.show(),t=jQuery('<div class="layerslider">').appendTo(t),jQuery("#ls-layers .ls-layer-box").eq(e).find(".ls-preview").hide(),jQuery("#ls-layers .ls-layer-box").eq(e).find(".ls-preview-button").html("Exit Preview").addClass("playing"),t.css({width:r,height:s});var i=jQuery('.ls-settings input[name="backgroundcolor"]').val(),n=jQuery('.ls-settings input[name="backgroundimage"]').val();""!=i&&t.css({backgroundColor:i}),""!=n&&t.css({backgroundImage:"url("+n+")"}),jQuery("#ls-layers .ls-layer-box").each(function(e){var r=jQuery(this),s=jQuery.parseJSON(r.find("textarea.ls-post-json").val()),i=r.find('input[name="post_offset"]').val(),n="";jQuery(this).find(".layerprop").each(function(){n+=""+jQuery(this).attr("name")+":"+jQuery(this).val()+";"});var l=jQuery('<div class="ls-layer">').appendTo(t);l.attr("data-ls",n);var o=jQuery(this).find('input[name="background"]').val();""!=o&&jQuery('<img src="'+o+'" class="ls-bg">').appendTo(l);var u=jQuery('input[name="2d_transitions"]',this).val(),d=jQuery('input[name="3d_transitions"]',this).val(),c=jQuery('input[name="custom_2d_transitions"]',this).val(),y=jQuery('input[name="custom_3d_transitions"]',this).val();""==u&&""==d&&""==c&&""==y?(l.attr("data-ls",l.attr("data-ls")+" transition2d: all; "),l.attr("data-ls",l.attr("data-ls")+" transition3d: all; ")):(""!=u&&l.attr("data-ls",l.attr("data-ls")+" transition2d: "+u+"; "),""!=d&&l.attr("data-ls",l.attr("data-ls")+" transition3d: "+d+"; "),""!=c&&l.attr("data-ls",l.attr("data-ls")+" customtransition2d: "+c+"; "),""!=y&&l.attr("data-ls",l.attr("data-ls")+" customtransition3d: "+y+"; ")),jQuery(this).find(".ls-sublayers > tr").each(function(t){if(jQuery('input[name="skip"]',this).prop("checked"))return jQuery("<div>").appendTo(l),!0;var r=jQuery('input[name="type"]',this).val();switch(jQuery('input[name="media"]',this).val()){case"img":r="img";break;case"html":r="div";break;case"post":r="post"}var s=jQuery('input[name="image"]',this).val(),n=jQuery('textarea[name="html"]',this).val(),o=jQuery('textarea[name="style"]',this).val(),u=jQuery('input[name="top"]',this).val(),d=jQuery('input[name="left"]',this).val(),c=jQuery('input[name="skip"]',this).prop("checked"),y=jQuery('input[name="url"]',this).val(),p=jQuery('input[name="id"]',this).val(),h=jQuery('input[name="class"]',this).val(),j="";jQuery(this).find(".sublayerprop").each(function(){j+=jQuery(this).is(":checkbox")?jQuery(this).attr("name")+":"+jQuery(this).prop("checked")+";":jQuery(this).attr("name")+":"+jQuery(this).val()+";"});var f={};jQuery(this).find(".ls-sublayer-style input.auto").each(function(){var e=jQuery(this).val(),t=jQuery(this).attr("name");return""===e?!0:(";"==e.slice(-1)&&(e=e.substring(0,e.length-1)),void(f[t]=isNumber(e)?e+"px":e))});var Q;if("img"==r){if(""==s)return!0;Q=jQuery('<img src="'+s+'" class="ls-s">').appendTo(l)}else if("post"==r){null===a&&(a=jQuery.parseJSON(jQuery("#ls-posts-json").val())),-1==i&&(i=e);var v=a[i],m=jQuery('input[name="post_text_length"]',this).val();for(var g in v)-1!==n.indexOf("["+g+"]")&&(("title"==g||"content"==g||"excerpt"==g)&&m>0&&(v[g]=v[g].substr(0,m)),n=n.replace("["+g+"]",v[g]));n=jQuery.trim(n);var b=n.substr(0,1),x=n.substr(n.length-1,1);"<"==b&&">"==x?(n=n.replace(/(\r\n|\n|\r)/gm,""),Q=jQuery(n).appendTo(l).addClass("ls-s")):Q=jQuery("<div>").appendTo(l).html(n).addClass("ls-s")}else Q=jQuery("<"+r+">").appendTo(l).html(n).addClass("ls-s");Q.attr("id",p).attr("style",o).addClass(h),Q.css(f),0==jQuery('input[name="wordwrap"]',this).prop("checked")&&Q.css("white-space","nowrap"),Q.css(-1!=u.indexOf("%")?{top:u}:{top:parseInt(u)}),Q.css(-1!=d.indexOf("%")?{left:d}:{left:parseInt(d)}),""!=y&&y.match(/^\#[0-9]/)&&Q.addClass("ls-linkto-"+y.substr(1)),Q.attr("data-ls",j)})});var l=jQuery('.ls-settings-contents input[name="autoplayvideos"]').prop("checked");l=l?!0:!1,jQuery(t).layerSlider({width:r,height:s,responsive:!1,skin:"preview",skinsPath:pluginPath+"skins/",animateFirstLayer:!0,firstLayer:e+1,autoStart:!1,pauseOnHover:!1,autoPlayVideos:l,cbInit:function(){lsTimeLine.create()},cbTimeLineStart:function(e,t){e.nextLayerIndex==jQuery("#ls-layer-tabs .active").index()+1&&lsTimeLine.start(t)}}),jQuery(t).layerSlider("start")},stop:function(){var e=jQuery("#ls-layers .ls-layer-box .ls-real-time-preview");e.children().length>0&&(jQuery("#ls-layers .ls-layer-box .ls-preview").show(),e.find(".ls-container").layerSlider("stop"),e.html("").hide(),jQuery("#ls-layers .ls-layer-box .ls-preview-button").text("Enter Preview").removeClass("playing")),lsTimeLine.remove()},openTransitionGallery:function(){jQuery("body").prepend(jQuery("<div>",{"class":"ls-overlay"})),jQuery("#ls-transition-window table").empty(),LayerSlider.appendTransition("","2d_transitions",layerSliderTransitions.t2d),LayerSlider.appendTransition("","3d_transitions",layerSliderTransitions.t3d),"undefined"!=typeof layerSliderCustomTransitions&&(layerSliderCustomTransitions.t2d.length&&LayerSlider.appendTransition("Custom 2D transitions","custom_2d_transitions",layerSliderCustomTransitions.t2d),layerSliderCustomTransitions.t3d.length&&LayerSlider.appendTransition("Custom 3D transitions","custom_3d_transitions",layerSliderCustomTransitions.t3d)),jQuery("#ls-transition-window .filters li.active").click(),jQuery(document).one("click",".ls-overlay",function(){LayerSlider.closeTransitionGallery()}),jQuery("#ls-transition-window").show()},closeTransitionGallery:function(){jQuery("#ls-transition-window").hide(),jQuery(".ls-overlay").remove()},appendTransition:function(e,t,r){var s=jQuery("<tbody>").data("tr-type",t).appendTo("#ls-transition-window table"),a=jQuery("#ls-layers .ls-layer-box.active").find('input[name="'+t+'"]').val();for(a=""!=a?a.split(","):[],""!=e&&jQuery("<tr>").appendTo(s).append('<th colspan="4">'+e+"</th>"),c=0;c<r.length;c+=2){var i=jQuery("<tr>").appendTo(s).append(jQuery('<td class="c"></td>')).append(jQuery("<td></td>")).append(jQuery('<td class="c"></td>')).append(jQuery("<td></td>"));i.children().eq(0).append("<i>"+(c+1)+'</i><i class="dashicons dashicons-yes"></i>'),i.children().eq(1).append(jQuery("<a>",{href:"#",html:r[c].name+"","data-key":c+1})),r.length>c+1&&(i.children().eq(2).append("<i>"+(c+2)+'</i><i class="dashicons dashicons-yes"></i>'),i.children().eq(3).append(jQuery("<a>",{href:"#",html:r[c+1].name+"","data-key":c+2}))),(-1!=a.indexOf(""+(c+1))||"all"==a)&&(i.children().eq(0).addClass("added"),i.children().eq(1).addClass("added")),(-1!=a.indexOf(""+(c+2))||"all"==a)&&(i.children().eq(2).addClass("added"),i.children().eq(3).addClass("added"))}},selectAllTransition:function(e,t){var r=jQuery("#ls-transition-window header i:last"),s=jQuery("#ls-transition-window tbody").eq(e).data("tr-type");void 0!=typeof t&&1==t?(jQuery("#ls-transition-window tbody").eq(e).find("td").addClass("added"),r.attr("class","on").text("Deselect all"),jQuery("#ls-layers .ls-layer-box.active").find('input[name="'+s+'"]').val("all")):(jQuery("#ls-transition-window tbody").eq(e).find("td").removeClass("added"),r.attr("class","off").text("Select all"),jQuery("#ls-layers .ls-layer-box.active").find('input[name="'+s+'"]').val(""))},toggleTransition:function(e){jQuery(e).parent().hasClass("added")?jQuery(e).parent().removeClass("added").prev().removeClass("added"):jQuery(e).parent().addClass("added").prev().addClass("added");var t=jQuery(e).closest("tbody").find("td");if(t.filter(".c.added").length==t.filter(".c").length)return void LayerSlider.selectAllTransition(jQuery(e).closest("tbody").index(),!0);jQuery("#ls-transition-window header i:last").attr("class","off").text("Select all");var r=jQuery(e).closest("tbody").data("tr-type"),s=[];t.filter(".added").find("a").each(function(){s.push(jQuery(this).data("key"))}),jQuery("#ls-layers .ls-layer-box.active").find('input[name="'+r+'"]').val(s.join(","))},showTransition:function(e){var t=parseInt(jQuery(e).data("key"))-1;jQuery("body").prepend(jQuery("<div>",{"class":"ls-popup"}).append(jQuery("<div>",{"class":"inner ls-transition-preview"})));var r=jQuery(".ls-popup"),s=jQuery(window).width(),a=jQuery(e).width(),i=jQuery(e).offset().left,n=jQuery(e).offset().top,l=r.outerWidth(),o=r.outerHeight();r.css({top:n-o-14,left:i-(l-a)/2}),r.offset().top<20&&r.css("top",n+26),r.offset().left<20&&r.css("left",20);var u=jQuery(e).closest("tbody").data("tr-type");if("3d_transitions"==u)var d="3d",c=layerSliderTransitions["t"+d][t];else if("2d_transitions"==u)var d="2d",c=layerSliderTransitions["t"+d][t];else if("custom_3d_transitions"==u)var d="3d",c=layerSliderCustomTransitions["t"+d][t];else if("custom_2d_transitions"==u)var d="2d",c=layerSliderCustomTransitions["t"+d][t];r.find(".inner").lsTransitionPreview({transitionType:d,transitionObject:c,imgPath:lsTrImgPath,skinsPath:lsTrImgPath+"../skins/",delay:100})},hideTransition:function(e){jQuery(".ls-popup").find(".inner").lsTransitionPreview("stop"),jQuery(".ls-popup").remove()},save:function(e){var t=slides=callbacks=[];jQuery(".ls-publish").addClass("saving").find("button").text("Saving ...").attr("disabled",!0),jQuery(".ls-slider-settings").find("input:not(.nochange), select, textarea").each(function(){jQuery(this).data("name",jQuery(this).attr("name")),jQuery(this).attr("name","ls_data[properties]["+jQuery(this).attr("name")+"]")}),jQuery("#ls-post-options").find("input, select").each(function(){if(jQuery(this).data("name",jQuery(this).attr("name")),"[]"==jQuery(this).attr("name").substr(-2,2)){var e=jQuery(this).attr("name");e=e.substring(0,e.length-2),jQuery(this).attr("name","ls_data[properties]["+e+"][]")}else jQuery(this).attr("name","ls_data[properties]["+jQuery(this).attr("name")+"]")}),jQuery("#ls-layers .ls-layer-box").each(function(e){jQuery(".ls-slide-options",this).find("input, select").each(function(){jQuery(this).data("name",jQuery(this).attr("name")),jQuery(this).attr("name","ls_data[layers]["+e+"][properties]["+jQuery(this).attr("name")+"]")}),jQuery(this).find(".ls-sublayers > tr").each(function(t){var r={};jQuery(this).find(".sublayerprop").each(function(){r[jQuery(this).attr("name")]=jQuery(this).is(":checkbox")?jQuery(this).prop("checked"):jQuery(this).val(),jQuery(this).data("name",jQuery(this).attr("name")).attr("name","")});var s={};jQuery(this).find("input.auto").each(function(){""!=jQuery(this).val()&&(s[jQuery(this).attr("name")]=jQuery(this).val()),jQuery(this).data("name",jQuery(this).attr("name")).attr("name","")}),jQuery(this).find('.ls-sublayer-style input[name="styles"]').val(JSON.stringify(s)),jQuery(this).find('.ls-sublayer-options input[name="transition"]').val(JSON.stringify(r)),jQuery(this).find("input, select, textarea").filter(":not(.auto,.sublayerprop)").each(function(){return""==jQuery(this).attr("name")?!0:(jQuery(this).data("name",jQuery(this).attr("name")),void jQuery(this).attr("name","ls_data[layers]["+e+"][sublayers]["+t+"]["+jQuery(this).attr("name")+"]"))
})}),slides.push(jQuery("input, textarea, select",this).serialize())}),jQuery(".ls-callback-page textarea").each(function(){jQuery(this).data("name",jQuery(this).attr("name")),jQuery(this).attr("name","ls_data[properties]["+jQuery(this).attr("name")+"]")}),jQuery.ajax({type:"post",url:ajaxurl,dataType:"text",data:{action:"ls_save_slider",id:jQuery('#ls-slider-form input[name="slider_id"]').val(),settings:jQuery(".ls-slider-settings, #ls-post-options").find("input:not(.nochange), select, textarea").serialize(),callbacks:jQuery(".ls-callback-page textarea").serialize(),slides:slides},error:function(e,t,r){alert("It seems there is a server issue that prevented LayerSlider from saving your work. Please, try to temporary disable themes/plugins, or contact with your hosting provider. Your HTTP server thrown the following error: \n\n"+r)},complete:function(e){jQuery(".ls-publish").removeClass("saving").addClass("saved").find("button").text("Saved"),setTimeout(function(){jQuery(".ls-publish").removeClass("saved").find("button").text("Save changes").attr("disabled",!1)},2e3),jQuery("#ls-slider-form").find("input, select, textarea").each(function(){jQuery(this).data("name")&&jQuery(this).attr("name",jQuery(this).data("name"))})}})},cloneFix:function(){jQuery("textarea").each(function(){jQuery(this).text(jQuery(this).val())}),jQuery("select:not([multiple])").each(function(){var e=jQuery(this).find("option:selected").index();jQuery(this).find("option").attr("selected",!1),jQuery(this).find("option").eq(e).attr("selected",!0)})}},LS_GoogleFontsAPI={results:0,fontName:null,fontIndex:null,init:function(){jQuery(".ls-font-search input").focus(function(){LS_GoogleFontsAPI.getFonts()}),jQuery(".ls-font-search button").click(function(e){e.preventDefault();var t=jQuery(this).prev()[0];LS_GoogleFontsAPI.timeout=setTimeout(function(){LS_GoogleFontsAPI.search(t)},500)}),jQuery(".ls-font-search input").keydown(function(e){if(13===e.which){e.preventDefault();var t=this;LS_GoogleFontsAPI.timeout=setTimeout(function(){LS_GoogleFontsAPI.search(t)},500)}}),jQuery(".ls-google-fonts .fonts").on("click","li:not(.unselectable)",function(){LS_GoogleFontsAPI.showVariants(this)}),jQuery(".ls-font-search").on("click","button.add-font",function(e){e.preventDefault(),LS_GoogleFontsAPI.addFonts(this)}),jQuery(".ls-google-fonts .variants").on("click","button:last",function(e){e.preventDefault(),LS_GoogleFontsAPI.showFonts(this)}),jQuery(document).on("click",".ls-overlay",function(){return jQuery(this).data("manualclose")?!1:void(jQuery(".ls-pointer").length&&(jQuery(this).remove(),jQuery(".ls-pointer").children("div.fonts").show().next().hide(),jQuery(".ls-pointer").animate({marginTop:40,opacity:0},150,function(){this.style.display="none"})))}),jQuery(".ls-font-list").on("click","a.remove",function(e){e.preventDefault(),jQuery(this).parent().animate({height:0,opacity:0},300,function(){jQuery(this).siblings().length<2&&jQuery(this).parent().append(jQuery("<li>",{"class":"ls-notice",text:"You didn't add any Google font to your library yet."})),jQuery(this).remove()})})},getFonts:function(){if(0==LS_GoogleFontsAPI.results){var e="AIzaSyC_iL-1h1jz_StV_vMbVtVfh3h2QjVUZ8c";jQuery.getJSON("https://www.googleapis.com/webfonts/v1/webfonts?key="+e,function(e){LS_GoogleFontsAPI.results=e})}},search:function(e){jQuery(".ls-overlay").remove();var t=jQuery(e).val().toLowerCase();if(0!=LS_GoogleFontsAPI.results&&t.length>2){var r=[],s=jQuery.grep(LS_GoogleFontsAPI.results.items,function(e,s){return-1!==e.family.toLowerCase().indexOf(t)?(r.push(s),!0):void 0}),a=jQuery(".ls-font-search .ls-pointer .fonts ul");if(a.empty(),s.length)for(c=0;c<s.length;c++)a.append(jQuery("<li>",{"data-key":r[c],text:s[c].family}));else a.append(jQuery("<li>",{"class":"unselectable"}).append(jQuery("<h4>",{text:"No results were found"})));jQuery(".ls-font-search .ls-pointer").show().animate({marginTop:15,opacity:1},150),jQuery("<div>",{"class":"ls-overlay ls-add-slider-overlay"}).prependTo("body")}},showVariants:function(e){var t=jQuery(e).text(),r=jQuery(e).data("key"),s=LS_GoogleFontsAPI.results.items[r].variants;LS_GoogleFontsAPI.fontName=t,LS_GoogleFontsAPI.fontIndex=r;var a=jQuery(e).closest("div").next().children("ul");for(a.empty(),jQuery(e).closest(".ls-box").children(".header").text('Select "'+t+'" variants'),c=0;c<s.length;c++)a.append(jQuery("<li>",{"class":"unselectable"}).append(jQuery("<input>",{type:"checkbox"})).append(jQuery("<span>",{text:ucFirst(s[c])})));a.find(":checkbox").customCheckbox(),jQuery(e).closest(".fonts").hide().next().show()},showFonts:function(e){jQuery(e).closest(".ls-box").children(".header").text("Choose a font family"),jQuery(e).closest(".variants").hide().prev().show()},addFonts:function(e){var t=jQuery(e).parent().prev().find("input:checked"),r=[],s=[];r.push(LS_GoogleFontsAPI.fontName.replace(/ /g,"+")),t.length&&(r.push(":"),t.each(function(){s.push(jQuery(this).siblings("span").text().toLowerCase())}),r.push(s.join(","))),LS_GoogleFontsAPI.appendToFontList(r.join(""))},appendToFontList:function(e){jQuery("ul.ls-font-list li.ls-notice").remove();var t=jQuery("ul.ls-font-list li").length-1,r=jQuery("ul.ls-font-list li.ls-hidden").clone();r.children("input:text").val(e).attr("name","urlParams[]"),r.children("input:checkbox").attr("name","onlyOnAdmin[]"),r.appendTo("ul.ls-font-list").attr("class",""),jQuery(".ls-font-search input").val(""),jQuery(".ls-overlay").click()}},lsTimeLine={opened:!1,init:function(){jQuery(document).on("click",".ls-tl-toggle",function(e){e.preventDefault();var t=jQuery(this).closest("table"),r=jQuery(this).closest("table").find(".ls-tl");"none"==r.eq(0).css("display")?lsTimeLine.show(t,r):lsTimeLine.hide(r)})},show:function(e,t){if(-1!=e.find("tr").length){-1!=e.find("tr.active").length?(this.opened=e.find("tr.active"),e.find("tr.active").removeClass("active")):this.opened=!1,jQuery(".ls-sublayer-title").outerWidth(138);var r=parseInt(jQuery("#ls-layers .active").find('input[name="slidedelay"]').val());t.addClass("ls-tl-active"),t.each(function(){var e=r,t=e/100,s="100%",a=[],i=["delayin","durationin","showuntil","durationout"],n=["Delay in","Duration in","Show until","Duration out"];a.push(parseInt(jQuery(this).closest(".ls-sublayer-wrapper").find('input[name="delayin"]').val())),a.push(parseInt(jQuery(this).closest(".ls-sublayer-wrapper").find('input[name="durationin"]').val())),a.push(parseInt(jQuery(this).closest(".ls-sublayer-wrapper").find('input[name="showuntil"]').val())),a.push(parseInt(jQuery(this).closest(".ls-sublayer-wrapper").find('input[name="durationout"]').val()));var l=a[2];0===a[2]&&(a[3]=0,a[2]=e-(a[0]+a[1])>0?e-(a[0]+a[1]):0),e>a[0]+a[1]+a[2]+a[3]&&(s=(a[0]+a[1]+a[2]+a[3])/t+"%"),jQuery(this).find("table").css({width:s});for(var o=0;o<a.length;o++){e-=a[o];var u=jQuery(this).find(".ls-tl-"+i[o]),d=a[o]/t+"%";if(0>e){d=(a[o]+e)/t+"%",u.css("width",d),u.attr("data-help",n[o]+": "+(a[o]+e)+" ms (original: "+a[o]+" ms but the current Slide delay is "+r+" ms, so this slide will change before)");break}u.css("width",d),2==o&&0==l?u.attr("data-help","This layer will be shown until the slide change and it will be animate out with the other layers."):u.attr("data-help",n[o]+": "+a[o]+" ms")}});for(var s=e.find(".ls-sublayers").height(),a=jQuery("<div>").addClass("ls-tl-ruler").appendTo(e.find("tr:eq(0) td")),i=r%1e3===0?r/1e3+1:parseInt(r/1e3)+2,n,l,o,u=0;i>u;u++)n=u===i-1?"100%":1e3*u/(r/100)+"%",o=u===i-1?r:1e3*u,l=jQuery("<div>").css({top:-5,left:n,height:s+6}).appendTo(a),jQuery("<p>").text(o+" ms").appendTo(l)}},hide:function(e){e.removeClass("ls-tl-active"),jQuery(".ls-sublayer-title").width(250),jQuery(".ls-tl-ruler").remove(),this.opened&&0==jQuery("#ls-layers .active .ls-sublayers tr.active").length&&this.opened.addClass("active"),this.opened=!1},create:function(){var e=jQuery("<div>").addClass("ls-tl-slider").appendTo(".ls-tl-active")},start:function(e){var t=parseInt(jQuery("#ls-layers .active").find('input[name="slidedelay"]').val()),r=jQuery(".ls-tl-slider"),s=jQuery(".ls-tl-active:eq(0)").width(),e=e?e:0;r.css({width:0}).delay(e).animate({width:s},t,"linear")},remove:function(){jQuery(".ls-tl-slider").stop().remove()}},LS_CodeMirror={init:function(e){var t={mode:"css",theme:"solarized",lineNumbers:!0,autofocus:!0,indentUnit:4,indentWithTabs:!0,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],styleActiveLine:!0,extraKeys:{"Ctrl-Q":function(e){e.foldCode(e.getCursor())}}};"undefined"!=typeof e&&jQuery.extend(t,e),jQuery(".ls-codemirror").each(function(){var e=CodeMirror.fromTextArea(this,t);e.on("change",function(e){e.getTextArea().value=e.getValue()})})}},LS_PostOptions={init:function(){jQuery("#ls-layers").on("click",".ls-configure-posts",function(e){e.preventDefault(),LS_PostOptions.open(this)}),jQuery(".ls-configure-posts-modal .header a").click(function(e){e.preventDefault(),LS_PostOptions.close()}),jQuery("#ls-post-options select:not(.ls-post-taxonomy, .post_offset)").change(function(){LS_PostOptions.change(this)}),jQuery("#ls-post-options select.offset").change(function(){jQuery('#ls-layers .ls-layer-box.active input[name="post_offset"]').val(jQuery(this).val()),LayerSlider.willGeneratePreview(jQuery(".ls-layer-box.active").index())}),jQuery("#ls-post-options select.ls-post-taxonomy").change(function(){LS_PostOptions.getTaxonoies(this)}),jQuery("#ls-layers").on("click",".ls-post-placeholders li",function(){LS_PostOptions.insertPlaceholder(this)})},open:function(e){jQuery("body").prepend(jQuery("<div>",{"class":"ls-overlay"}));var t=jQuery('#ls-layers .ls-layer-box.active input[name="post_offset"]').val();t=parseInt(t)+1;var r=jQuery("#ls-post-options").show();r.find("select.offset option").prop("selected",!1).eq(t).prop("selected",!0),jQuery(document).one("click",".ls-overlay",function(){LS_PostOptions.close()}),0===r.find(".ls-post-previews ul").children().length&&LS_PostOptions.change(r.find("select")[0])},getTaxonoies:function(e){var t=jQuery(e).next().empty();0==jQuery(e).val()?LS_PostOptions.change(e):jQuery.post(ajaxurl,jQuery.param({action:"ls_get_taxonomies",taxonomy:jQuery(e).val()}),function(e){var e=jQuery.parseJSON(e);for(c=0;c<e.length;c++)t.append(jQuery("<option>",{value:e[c].term_id,text:e[c].name}))})},change:function(e){var t={};jQuery("#ls-post-options").find("select").each(function(){t[jQuery(this).data("param")]=jQuery(this).val()}),jQuery.post(ajaxurl,jQuery.param({action:"ls_get_post_details",params:t}),function(t){var r=jQuery.parseJSON(t);jQuery("#ls-posts-json").val(t),LayerSlider.willGeneratePreview(jQuery(".ls-layer-box.active").index()),LS_PostOptions.update(e,r)})},update:function(e,t){var r=jQuery("#ls-post-options").find(".ls-post-previews ul").empty();if(0===t.length)r.append(jQuery("<li>").append(jQuery("<h4>",{text:"No posts were found with the current filters."})));else for(c=0;c<t.length;c++)r.append(jQuery("<li>").append(jQuery("<span>",{"class":"counter",text:""+(c+1)+". "})).append(jQuery("<img>",{src:t[c].thumbnail})).append(jQuery("<h3>",{html:t[c].title})).append(jQuery("<p>",{html:t[c].content})).append(jQuery("<span>",{"class":"author",text:t[c]["date-published"]+" by "+t[c].author})))},close:function(){jQuery("#ls-post-options").hide(),jQuery(".ls-overlay").remove()},insertPlaceholder:function(e){var t=jQuery(e).closest(".ls-sublayer-page").find('textarea[name="html"]')[0],r="undefined"!=typeof jQuery(e).data("placeholder")?jQuery(e).data("placeholder"):jQuery(e).children().text();if(document.selection){t.focus();var s=document.selection.createRange();s.text=r,t.focus()}else if(t.selectionStart||0===t.selectionStart){var a=t.selectionStart,i=t.selectionEnd,n=t.scrollTop;t.value=t.value.substring(0,a)+r+t.value.substring(i,t.value.length),t.focus(),t.selectionStart=a+r.length,t.selectionEnd=a+r.length,t.scrollTop=n}else t.value+=r,t.focus();jQuery(t).keyup()}};jQuery(document).ready(function(){if("undefined"!=typeof lsScreenOptions&&"true"==lsScreenOptions.showTooltips&&lsTooltip.init(),jQuery("#ls-screen-options").children().first().appendTo("#screen-meta"),jQuery("#ls-screen-options").children().last().appendTo("#screen-meta-links"),lsScreenOptionsActions.init(),-1===document.location.href.indexOf("&action=edit")&&LS_CodeMirror.init(),jQuery(document).on("click",".ls-checkbox",function(e){e.preventDefault();var t=jQuery(this).prev()[0];jQuery(t).is(":checked")?(jQuery(t).prop("checked",!1),jQuery(this).removeClass("on").addClass("off")):(jQuery(t).prop("checked",!0),jQuery(this).removeClass("off").addClass("on")),jQuery("#ls-layers").trigger(jQuery.Event("click",{target:t})),jQuery(document).trigger(jQuery.Event("click",{target:t}))}),-1!=document.location.href.indexOf("page=layerslider")&&-1==document.location.href.indexOf("layerslider_add_new")&&-1==document.location.href.indexOf("action=edit")&&-1==document.location.href.indexOf("ls-skin-editor")&&-1==document.location.href.indexOf("ls-style-editor")&&-1==document.location.href.indexOf("ls-transition-builder"))LS_BoxToggles.init(),jQuery(".ls-global-settings :checkbox").customCheckbox(),jQuery(".ls-google-fonts :checkbox").customCheckbox(),LS_GoogleFontsAPI.init(),jQuery(".ls-sliders-list a.remove").click(function(e){e.preventDefault(),confirm("Are you sure you want to remove this slider?")&&(document.location.href=jQuery(this).attr("href"))}),jQuery("#ls-add-slider-button").click(function(e){e.preventDefault();var t=jQuery(this).position(),r=jQuery("#ls-add-slider-template");r.css({top:t.top+35,left:t.left-r.outerWidth()/2+jQuery(this).width()/2+7}).show().animate({marginTop:0,opacity:1},150,function(){jQuery(this).find(".inner input").focus()}),jQuery("<div>",{"class":"ls-overlay ls-add-slider-overlay"}).prependTo("body")}),jQuery("#ls-import-samples-button").click(function(e){e.preventDefault();var t=jQuery(this).position(),r=jQuery("#ls-import-samples-template");r.css({top:t.top+35,left:t.left-r.outerWidth()/2+jQuery(this).width()/2+7}).show().animate({marginTop:0,opacity:1},150),jQuery("<div>",{"class":"ls-overlay ls-add-slider-overlay"}).prependTo("body")}),jQuery(document).on("click",".ls-overlay",function(){return jQuery(this).data("manualclose")?!1:void(jQuery(".ls-pointer").length&&(jQuery(".ls-overlay").remove(),jQuery(".ls-pointer").animate({marginTop:40,opacity:0},150)))}),jQuery(".ls-auto-update").submit(function(e){e.preventDefault(),jQuery(".ls-auto-update span.status").text("Validating ...").css("color","#333"),jQuery.post(ajaxurl,jQuery(this).serialize(),function(e){var e=jQuery.parseJSON(e),t="undefined"==typeof e.errCode?!0:!1,r=t?"#4b982f":"#c33219",s=t?"Successfully set up automatic updates.":"Failed to set up automatic updates.";s="undefined"==typeof e.status?s:e.status,jQuery(".ls-auto-update span.status").html(s).css("color",r),t?jQuery(".ls-auto-update .footer a").removeClass("ls-hidden"):jQuery(".ls-auto-update .footer a").addClass("ls-hidden"),"undefined"!=typeof e.message&&alert(e.message)})}),jQuery(".ls-auto-update a.ls-deauthorize").click(function(e){e.preventDefault(),jQuery.get(ajaxurl,jQuery.param({action:"layerslider_deauthorize_site"}),function(e){var e=jQuery.parseJSON(e);"undefined"==typeof e.errCode&&(jQuery(".ls-auto-update span.status").html(e.status).css("color","#c33219"),jQuery(".ls-auto-update .footer a").addClass("ls-hidden"),jQuery('.ls-auto-update input[name="purchase_code"]').val("")),"undefined"!=typeof e.message&&alert(e.message)})}),jQuery("#ls-permission-form").submit(function(e){e.preventDefault(),confirm("WARNING: This option controls who can access to this plugin, you can easily lock out yourself by accident. Please, make sure that you have entered a valid capability without whitespaces or other invalid characters. Do you want to proceed?")&&this.submit()}),jQuery(".ls-news .filters li").click(function(){jQuery(this).siblings().attr("class",""),jQuery(this).attr("class","active");var e=jQuery(this).data("page"),t=jQuery(this).closest(".ls-box").find("iframe"),r=t.attr("src").split("#")[0];t.attr("src",r+"#"+e)}),jQuery("input.ls-shortcode").click(function(){this.focus(),this.select()}),jQuery("form.ls-import-box button").click(function(){jQuery(this).addClass("saving").text("Importing")}),jQuery("#ls-import-samples-template li").click(function(){jQuery("#ls-import-samples-button").addClass("saving").text("Importing, please wait")});else if(-1!=document.location.href.indexOf("ls-skin-editor")||-1!=document.location.href.indexOf("ls-style-editor"))jQuery('select[name="skin"]').change(function(){document.location.href="admin.php?page=ls-skin-editor&skin="+jQuery(this).children(":selected").val()});else if(-1!=document.location.href.indexOf("ls-transition-builder"));else{if(history.replaceState&&-1!=document.location.href.indexOf("&showsettings=1")){var e=document.location.href.replace("&showsettings=1","");history.replaceState(null,document.title,e)}jQuery("#ls-main-nav-bar a:not(.unselectable)").click(function(e){e.preventDefault(),LayerSlider.selectMainTab(this)}),jQuery(window).resize(function(){}),jQuery("#ls-main-nav-bar a.support").click(function(e){e.preventDefault(),jQuery("#contextual-help-link").click()}),jQuery(".ls-settings :checkbox, .ls-layer-box :checkbox:not(.noreplace)").customCheckbox(),jQuery(window).load(function(){LayerSlider.generatePreview(jQuery(".ls-box.active").index())}),LayerSlider.openMediaLibrary(),LayerSlider.insertUpload(),jQuery(document).on({mouseenter:function(){""!=jQuery(this).prev().val()&&jQuery(this).addClass("hover")},mouseleave:function(){""!=jQuery(this).prev().val()&&jQuery(this).removeClass("hover")}},".ls-image"),jQuery(document).on("click",".ls-image a",function(e){e.preventDefault(),e.stopPropagation(),jQuery(this).closest(".ls-image").removeClass("hover"),jQuery(this).closest(".ls-image").find("img").attr("src",lsTrImgPath+"/not_set.png"),jQuery(this).closest(".ls-image").prev().val(""),jQuery(this).closest(".ls-image").prev().prev().val(""),LayerSlider.generatePreview(jQuery(".ls-box.active").index())}),jQuery(".ls-settings").find('input[name="width"], input[name="height"], input[name="sublayercontainer"]').keyup(function(){LayerSlider.willGeneratePreview(jQuery(".ls-box.active").index())}),jQuery('.ls-settings input[name="backgroundcolor"]').keyup(function(){LayerSlider.willGeneratePreview(jQuery(".ls-box.active").index())}),jQuery(document).on("click",".ls-reset",function(){jQuery(this).prev().val(""),LayerSlider.generatePreview(jQuery(".ls-box.active").index())}),jQuery('.ls-settings input[name="yourlogostyle"]').keyup(function(){LayerSlider.willGeneratePreview(jQuery(".ls-box.active").index())}),jQuery("#ls-add-layer").click(function(e){e.preventDefault(),LayerSlider.addLayer()}),jQuery("#ls-layer-tabs").on("click","a:not(.unsortable)",function(e){e.preventDefault(),LayerSlider.selectLayer(this)}),jQuery("#ls-layers").on("click","button.ls-layer-duplicate",function(e){e.preventDefault(),LayerSlider.duplicateLayer(this)}),jQuery("#ls-layers").on("click",".ls-url-prompt",function(e){e.preventDefault();var t=null,r=prompt("Enter an image URL");return r&&""!=r?(jQuery(this).parent().is("td")?t=jQuery(this).parent().next():jQuery(this).parent().parent().is(".ls-image-uploader")&&(t=jQuery(this).closest(".ls-image-uploader")),t.children("input").eq(0).val(""),t.children("input").eq(1).val(r),t.find(".ls-image img").attr("src",r),void LayerSlider.willGeneratePreview(jQuery(".ls-box.active").index())):!1}),jQuery("#ls-layers").on("click",".ls-select-transitions",function(e){e.preventDefault(),LayerSlider.openTransitionGallery()}),jQuery(document).on("click","#ls-transition-window header b",function(e){e.preventDefault(),LayerSlider.closeTransitionGallery()}),jQuery(document).on("click","#ls-transition-window tbody a:not(.ls-checkbox)",function(e){e.preventDefault(),LayerSlider.toggleTransition(this)}),jQuery(document).on("click","#ls-transition-window header i:last",function(e){var t=jQuery(this).hasClass("off")?!0:!1;jQuery("#ls-transition-window tbody.active").each(function(){LayerSlider.selectAllTransition(jQuery(this).index(),t)})}),jQuery(document).on("click","#ls-transition-window header i:not(:last)",function(e){if(!confirm("Are you sure you want to apply the currently selected transitions on the other slides?"))return!1;var t=jQuery(this);t.css("color","#bbb"),setTimeout(function(){t.css("color","#444")},2e3),jQuery('.ls-layer-box:not(.active) input[name="3d_transitions"]').val(jQuery('.ls-layer-box.active input[name="3d_transitions"]').val()),jQuery('.ls-layer-box:not(.active) input[name="2d_transitions"]').val(jQuery('.ls-layer-box.active input[name="2d_transitions"]').val()),jQuery('.ls-layer-box:not(.active) input[name="custom_3d_transitions"]').val(jQuery('.ls-layer-box.active input[name="custom_3d_transitions"]').val()),jQuery('.ls-layer-box:not(.active) input[name="custom_2d_transitions"]').val(jQuery('.ls-layer-box.active input[name="custom_2d_transitions"]').val())}),jQuery(document).on("mouseenter","#ls-transition-window table a:not(.ls-checkbox)",function(){LayerSlider.showTransition(this)}),jQuery(document).on("mouseleave","#ls-transition-window table a:not(.ls-checkbox)",function(){LayerSlider.hideTransition(this)}),jQuery("#ls-layers").on("click",".ls-add-sublayer",function(e){e.preventDefault(),LayerSlider.addSublayer(this)}),jQuery("#ls-layer-tabs").on("click","a span",function(e){e.preventDefault(),e.stopPropagation(),LayerSlider.removeLayer(this)}),jQuery("#ls-layers").on("click",".ls-sublayers tr",function(){LayerSlider.selectSubLayer(this)}),jQuery("#ls-layers").on("click",".ls-sublayer-nav a:not(:last-child)",function(e){e.preventDefault(),LayerSlider.selectSublayerPage(this)}),jQuery("#ls-layers").on("click",".ls-sublayer-nav a:last-child",function(e){e.preventDefault(),LayerSlider.removeSublayer(this)}),jQuery("#ls-layers").on("click",".ls-sublayer-options button.duplicate",function(e){e.preventDefault(),LayerSlider.duplicateSublayer(this)}),jQuery("#ls-layers").on("click",".ls-highlight",function(e){e.stopPropagation(),LayerSlider.highlightSublayer(this)}),jQuery("#ls-layers").on("click",".ls-layer-kind li",function(e){e.preventDefault(),LayerSlider.selectMediaType(this)}),jQuery("#ls-layers").on("click",".ls-sublayer-element > li",function(e){e.preventDefault(),LayerSlider.selectElementType(this)}),jQuery("#ls-layers .ls-sublayer-basic").each(function(){var e=jQuery('input[name="media"]',this).val(),t=jQuery('input[name="type"]',this).val(),r=jQuery('.ls-layer-kind li[data-section="'+e+'"]',this),s=jQuery('.ls-sublayer-element > li[data-element="'+t+'"]',this);LayerSlider.selectMediaType(r),LayerSlider.selectElementType(s)}),jQuery("#ls-layers").on("keyup",".ls-sublayer-style input, .ls-sublayer-style select, .ls-sublayer-style textarea",function(){LayerSlider.willGeneratePreview(jQuery(this).closest(".ls-layer-box").index())}),jQuery("#ls-layers").on("click",'.ls-sublayers input[name="wordwrap"]',function(){LayerSlider.generatePreview(jQuery(this).closest(".ls-layer-box").index())}),jQuery("#ls-layers").on("keyup",'.ls-sublayers textarea[name="html"]',function(){LayerSlider.willGeneratePreview(jQuery(this).closest(".ls-layer-box").index())}),jQuery("#ls-layers").on("keydown change",'.ls-sublayers input[name="post_text_length"]',function(){LayerSlider.willGeneratePreview(jQuery(this).closest(".ls-layer-box").index())}),LayerSlider.addSortables(),LayerSlider.addDraggable(),LayerSlider.addLayerSortables(),jQuery("#ls-layers").on("click",'.ls-sublayer-options input[name="skip"]',function(){LayerSlider.skipSublayer(this)}),jQuery("#ls-layers").on("click",".ls-preview-button",function(e){e.preventDefault(),LayerSlider.play(jQuery(this).closest(".ls-layer-box").index())}),jQuery("#ls-layers").on("click",".draggable > *",function(e){e.preventDefault(),LayerSlider.selectDragElement(this)}),jQuery("#ls-slider-form").submit(function(e){e.preventDefault(),LayerSlider.save(this)}),LayerSlider.addColorPicker(jQuery("#ls-slider-form input.ls-colorpicker")),jQuery(".color").focus(function(){jQuery(this).next().slideDown()}),jQuery(".color").blur(function(){jQuery(this).next().slideUp()}),jQuery("#ls-layers").on("click",".ls-icon-eye",function(e){e.stopPropagation(),LayerSlider.eyeSublayer(this)}),jQuery("#ls-layers").on("click",".ls-icon-lock",function(e){e.stopPropagation(),LayerSlider.lockSublayer(this)}),jQuery("ul.ls-settings-sidebar > li").click(function(){LayerSlider.selectSettingsTab(this)}),jQuery("#ls-layers").on("mousedown",".ls-sublayer-sortable-handle",function(){jQuery(this).closest(".ls-sublayers").addClass("dragging")}),jQuery("#ls-layers").on("mouseup",".ls-sublayer-sortable-handle",function(){jQuery("#ls-layers .ls-layer-box.active .ls-sublayer-sortable").removeClass("dragging")}),lsTimeLine.init(),LS_PostOptions.init(),LayerSlider.addPreviewSlider(jQuery("#ls-layers .ls-editor-slider")),jQuery("#ls-transition-window .filters li").click(function(){jQuery(this).siblings().removeClass("active"),jQuery(this).addClass("active"),jQuery("#ls-transition-window tbody").removeClass("active"),jQuery("#ls-transition-window tbody").eq(jQuery(this).index()).addClass("active"),2==jQuery(this).index()&&jQuery("#ls-transition-window tbody").eq(3).addClass("active");var e=jQuery("#ls-transition-window tbody.active td");e.filter(".c.added").length==e.filter(".c").length?jQuery("#ls-transition-window header i:last").attr("class","on").text("Deselect all"):jQuery("#ls-transition-window header i:last").attr("class","off").text("Select all")}),jQuery("#ls-layers").on("click",".ls-slide-link a",function(e){e.preventDefault(),jQuery(this).closest(".ls-slide-link").children("input").val("[post-url]")}),jQuery("#ls-layers").on("click",".slide-image .ls-post-image",function(e){e.preventDefault(),jQuery(this).closest(".slide-image").children('input[name="backgroundId"]').val(""),jQuery(this).closest(".slide-image").children('input[name="background"]').val("[image-url]"),jQuery(this).closest(".slide-image").children('input[name="imageId"]').val(""),jQuery(this).closest(".slide-image").children('input[name="image"]').val("[image-url]"),LayerSlider.generatePreview(jQuery(this).closest(".ls-layer-box").index())})}});